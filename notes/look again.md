need to look at mocking and maybe dependency injection
